@prefix : <https://w3id.org/semts/ontology#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix qudt: <http://qudt.org/schema/qudt#> .
@prefix qudtUnit: <http://qudt.org/vocab/unit/> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix gb: <https://w3id.org/semts/examples/grindingbeads/> .
@prefix semts-dv: <https://w3id.org/semts/vocabulary/data-knowledge#> .
@prefix semts-sv: <https://w3id.org/semts/vocabulary/scenario-knowledge#> .
@prefix mlso-em: <http://w3id.org/mlso/vocab/evaluation_measure#> .
@prefix mlso-algo: <http://w3id.org/mlso/vocab/ml_algorithm#> .

#################################################################
# Knowledge Generation Entity
#################################################################

gb:ExpertAnnotation a :KnowledgeReasoning ;
    :title "Expert Domain Annotation" ;
    :description "Manual annotation by domain expert" ;
    :knowledgeGenerationConcept gb:ManualAnnotationConcept ;
    :used gb:ExpertAnnotationInput ;
    :generated gb:ExpertAnnotationOutput .

gb:ManualAnnotationConcept a :KnowledgeGenerationConcept ;
    skos:prefLabel "Manual Expert Annotation"@en .

gb:ExpertAnnotationInput a :KnowledgeGenerationInput ;
    :title "Expert Knowledge Input" ;
    :inputDataReference gb:WearTimeSeries .

gb:ExpertAnnotationOutput a :KnowledgeGenerationOutput ;
    :title "Expert Knowledge Output" ;
    :wasDerivedFrom gb:ExpertAnnotationInput ;
    :outputKnowledge gb:RefillEvent ;
    :outputKnowledge gb:ExpertObservation .

#################################################################
# Data Dimensions
#################################################################

gb:WearRateDimension a :DataDimension ;
    :title "Wear Rate" ;
    :description "Measured wear rate of grinding beads in mm per hour" ;
    :dimensionPosition 0 ;
    :hasUnit qudtUnit:MilliM-PER-HR ;
    :hasDatatype qudt:RealDoublePrecisionType .

gb:TemperatureDimension a :DataDimension ;
    :title "Temperature" ;
    :description "Operating temperature of the mill in Celsius" ;
    :dimensionPosition 1 ;
    :hasUnit qudtUnit:DEG_C ;
    :hasDatatype qudt:RealDoublePrecisionType .

#################################################################
# Main Time Series Segment
#################################################################

gb:WearTimeSeries a :TimeSeriesSegment ;
    :title "Grinding Bead Wear Data" ;
    :description "Hourly measurements of grinding bead wear in an industrial mill" ;
    :segmentIndex gb:TimeInterval ;
    :segmentDimension gb:WearRateDimension ;
    :segmentDimension gb:TemperatureDimension ;
    :segmentKnowledge gb:AverageWearRate ;
    :segmentKnowledge gb:WearRateVariability ;
    :segmentKnowledge gb:ExpertObservation ;
    :multiSegmentKnowledge gb:TempWearCorrelation ;
    dcat:distribution [
        a dcat:Distribution ;
        dcat:downloadURL <localhost/data/grinding_bead_wear_2023.csv> ;
        dcat:mediaType "text/csv"
    ] .

gb:TimeInterval a time:Interval ;
    time:hasBeginning gb:StartInstant ;
    time:hasEnd gb:EndInstant .

gb:StartInstant a time:Instant ;
    time:inXSDDateTime "2023-01-01T00:00:00Z"^^xsd:dateTime .

gb:EndInstant a time:Instant ;
    time:inXSDDateTime "2023-01-31T23:59:59Z"^^xsd:dateTime .

#################################################################
# Temperature Segment
#################################################################

gb:TemperatureSegment a :TimeSeriesSegment ;
    :title "Temperature Data Segment" ;
    :description "Temperature measurements from the grinding mill" ;
    :isPartOf gb:WearTimeSeries ;
    :segmentIndex gb:TimeInterval ;
    :segmentDimension gb:TemperatureDimension ;
    :multiSegmentKnowledge gb:TempWearCorrelation ;
    dcat:distribution [
        a dcat:Distribution ;
        dcat:downloadURL <localhost/data/grinding_bead_wear_2023.csv> ;
        dcat:mediaType "text/csv"
    ] .

#################################################################
# Refill Event Segment
#################################################################

gb:RefillEventSegment a :TimeSeriesSegment ;
    :title "Refill event" ;
    :description "Time of the refill" ;
    :segmentIndex gb:RefillTimeInterval ;
    :segmentDimension gb:WearRateDimension ;
    :segmentDimension gb:TemperatureDimension ;
    :segmentKnowledge gb:RefillEvent ;
    :isPartOf gb:WearTimeSeries ;
    dcat:distribution [
        a dcat:Distribution ;
        dcat:downloadURL <localhost/data/grinding_bead_wear_2023.csv> ;
        dcat:mediaType "text/csv"
    ] .

gb:RefillTimeInterval a time:Interval ;
    time:hasBeginning gb:RefillStartInstant ;
    time:hasEnd gb:RefillEndInstant .

gb:RefillStartInstant a time:Instant ;
    time:inXSDDateTime "2023-01-15T14:00:00Z"^^xsd:dateTime .

gb:RefillEndInstant a time:Instant ;
    time:inXSDDateTime "2023-01-15T14:00:00Z"^^xsd:dateTime .

#################################################################
# Scenario Knowledge
#################################################################

gb:RefillEvent a :ScenarioKnowledge ;
    :title "January Refill" ;
    :description "Refill of 50kg new grinding beads" ;
    :knowledgeConcept semts-sv:CategorizedEvent ;
    :knowledgeGenerationEntity gb:ExpertAnnotation ;
    :hasValue gb:RefillEventValue .

gb:RefillEventValue a :EmbeddedValue ;
    :valueString "50" ;
    :hasDatatype qudt:RealDoublePrecisionType ;
    :hasUnit qudtUnit:KiloGM .

gb:ExpertObservation a :ScenarioKnowledge ;
    :title "Expert Observation on Wear Patterns" ;
    :description "Observation from domain expert on grinding bead wear patterns" ;
    :knowledgeConcept semts-sv:Observation ;
    :knowledgeGenerationEntity gb:ExpertAnnotation ;
    :hasValue gb:ExpertObservationValue .

gb:ExpertObservationValue a :EmbeddedValue ;
    :valueString "Wear rate increases non-linearly when temperature exceeds 60Â°C" ;
    :hasDatatype qudt:StringType .

#################################################################
# Statistical Analysis Method
#################################################################

gb:TSFreshConcept a :KnowledgeGenerationConcept ;
    skos:prefLabel "TSFresh"@en .

gb:StatisticalAnalysis a :KnowledgeGenerationMethod ;
    :title "Statistical Analysis of Wear Data" ;
    :description "Basic statistical analysis of grinding bead wear measurements" ;
    :knowledgeGenerationConcept gb:TSFreshConcept ;
    :used gb:AnalysisInput ;
    :generated gb:AnalysisOutput .

gb:AnalysisInput a :KnowledgeGenerationInput ;
    :title "Input for Statistical Analysis" ;
    :description "Raw wear rate data for statistical analysis" ;
    :inputDataReference gb:WearTimeSeries .

gb:AnalysisOutput a :KnowledgeGenerationOutput ;
    :title "Statistical Analysis Results" ;
    :description "Statistical measures derived from wear rate data" ;
    :outputKnowledge gb:AverageWearRate ;
    :outputKnowledge gb:WearRateVariability ;
    :wasDerivedFrom gb:AnalysisInput .

#################################################################
# Data Characteristics
#################################################################

gb:AverageWearRate a :SegmentDataCharacteristic ;
    :title "Average Wear Rate" ;
    :description "Average wear rate of grinding beads over the entire period" ;
    :knowledgeConcept semts-dv:MeanValue ;
    :hasValue gb:AverageWearRateValue ;
    :knowledgeGenerationEntity gb:StatisticalAnalysis .

gb:AverageWearRateValue a :EmbeddedValue ;
    :valueString "0.042" ;
    :hasDatatype qudt:RealDoublePrecisionType ;
    :hasUnit qudtUnit:MilliM-PER-HR .

gb:WearRateVariability a :SegmentDataCharacteristic ;
    :title "Wear Rate Variability" ;
    :description "Standard deviation of wear rate measurements" ;
    :knowledgeConcept semts-dv:StandardDeviation ;
    :hasValue gb:WearRateVariabilityValue ;
    :knowledgeGenerationEntity gb:StatisticalAnalysis .

gb:WearRateVariabilityValue a :EmbeddedValue ;
    :valueString "0.008" ;
    :hasDatatype qudt:RealDoublePrecisionType ;
    :hasUnit qudtUnit:MilliM-PER-HR .

#################################################################
# Wear Forecast Method
#################################################################

gb:WearForecastMethod a :KnowledgeGenerationMethod ;
    :title "Wear Rate Forecast Method" ;
    :description "Method for predicting future wear rates of grinding beads" ;
    :knowledgeGenerationConcept mlso-algo:LSTM ;
    :used gb:ForecastInput ;
    :generated gb:ForecastOutput .

gb:ForecastInput a :KnowledgeGenerationInput ;
    :title "Input for Wear Forecast" ;
    :description "Historical wear data for generating forecast" ;
    :inputDataReference gb:WearTimeSeries ;
    :inputKnowledge gb:AverageWearRate ;
    :inputKnowledge gb:WearRateVariability .

gb:ForecastOutput a :KnowledgeGenerationOutput ;
    :title "Wear Forecast Output" ;
    :description "Forecasted wear rates for the next period" ;
    :outputKnowledge gb:WearForecast ;
    :wasDerivedFrom gb:ForecastInput .

gb:WearForecast a :SegmentPrediction ;
    :title "Wear Rate Forecast" ;
    :description "Prediction of wear rate for February 2023" ;
    :knowledgeConcept semts-dv:Forecast ;
    :knowledgeGenerationEntity gb:WearForecastMethod ;
    :knowledgeQualityMeasure gb:ForecastAccuracy ;
    :hasValue [
        a :ReferencedValue ;
        :hasDatatype qudt:TimeSeriesArray ;
        dcat:distribution [
            a dcat:Distribution ;
            dcat:downloadURL <localhost/data/wear_forecast_feb2023.csv> ;
            dcat:mediaType "text/csv"
        ]
    ] .

#################################################################
# Forecast Segment (Artificial)
#################################################################

gb:ForecastSegment a :ArtificialTimeSeriesSegment ;
    :title "Forecast Segment" ;
    :description "Predicted wear values for February 2023" ;
    :segmentIndex gb:ForecastInterval ;
    :segmentDimension gb:WearRateDimension ;
    :segmentKnowledge gb:WearForecast ;
    dcat:distribution [
        a dcat:Distribution ;
        dcat:downloadURL <localhost/data/wear_forecast_feb2023.csv> ;
        dcat:mediaType "text/csv"
    ] .

gb:ForecastInterval a time:Interval ;
    time:hasBeginning gb:ForecastStartInstant ;
    time:hasEnd gb:ForecastEndInstant .

gb:ForecastStartInstant a time:Instant ;
    time:inXSDDateTime "2023-02-01T00:00:00Z"^^xsd:dateTime .

gb:ForecastEndInstant a time:Instant ;
    time:inXSDDateTime "2023-02-28T23:59:59Z"^^xsd:dateTime .

#################################################################
# Quality Measure
#################################################################

gb:ForecastAccuracy a :KnowledgeQualityMeasure ;
    :title "Forecast Accuracy" ;
    :description "Mean Absolute Error of the forecast" ;
    :qualityMeasureConcept mlso-em:mean_absolute_error ;
    :hasValue gb:MAEValue .

gb:MAEValue a :EmbeddedValue ;
    :valueString "0.005" ;
    :hasDatatype qudt:RealDoublePrecisionType ;
    :hasUnit qudtUnit:MilliM-PER-HR .

#################################################################
# Correlation Analysis Method
#################################################################

gb:CorrelationConcept a :KnowledgeGenerationConcept ;
    skos:prefLabel "Correlation Analysis"@en .

gb:CorrelationAnalysis a :KnowledgeGenerationMethod ;
    :title "Correlation Analysis Method" ;
    :description "Method for calculating correlation between time series dimensions" ;
    :knowledgeGenerationConcept gb:CorrelationConcept ;
    :used gb:CorrelationInput ;
    :generated gb:CorrelationOutput .

gb:CorrelationInput a :KnowledgeGenerationInput ;
    :title "Input for Correlation Analysis" ;
    :description "Temperature and wear rate data for correlation analysis" ;
    :inputDataReference gb:WearTimeSeries .

gb:CorrelationOutput a :KnowledgeGenerationOutput ;
    :title "Correlation Analysis Results" ;
    :description "Calculated correlation between temperature and wear rate" ;
    :outputKnowledge gb:TempWearCorrelation ;
    :wasDerivedFrom gb:CorrelationInput .

#################################################################
# Segment Relation
#################################################################

gb:TempWearCorrelation a :SegmentRelation ;
    :title "Temperature-Wear Correlation" ;
    :description "Analysis of correlation between temperature and wear rate" ;
    :knowledgeConcept semts-dv:Correlation ;
    :hasValue gb:CorrelationValue ;
    :knowledgeGenerationEntity gb:CorrelationAnalysis .

gb:CorrelationValue a :EmbeddedValue ;
    :valueString "0.72" ;
    :hasDatatype qudt:RealDoublePrecisionType .
